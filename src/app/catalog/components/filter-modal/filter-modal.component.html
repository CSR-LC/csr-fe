<lc-modal-layout headerTitle="{{ filterModalLabels.headerTitle }}" (closed)="onModalClose()">
  <ng-container body>
    <form id="filterForm" [formGroup]="filterForm" ngxsForm="catalog.equipmentFilterForm" (ngSubmit)="showEquipments()">
      @if (petKinds) {
        <section class="pet-kind-container" formArrayName="petKinds">
          <mat-label class="label">{{ filterModalLabels.petKindsLabel }}</mat-label>
          @for (petKind of petKindsFormArray.controls; track petKind; let i = $index) {
            <mat-checkbox
              color="primary"
              [formControlName]="i"
              class="pet-kind-item"
            >{{ petKinds[i].name }}</mat-checkbox>
          }
        </section>
      }
      @if (petSizes) {
        <section class="pet-size-container" formArrayName="petSizes">
          <mat-label class="label">{{ filterModalLabels.petSizesLabel }}</mat-label>
          @for (petSize of petSizesFormArray.controls; track petSize; let i = $index) {
            <mat-checkbox
              color="primary"
              [formControlName]="i"
              class="pet-size-item"
            >{{ petSizes[i].name }} {{!petSizes[i].is_universal ? (petSizes[i].size) : ''}}</mat-checkbox>
          }
        </section>
      }
      <section class="equipment-condition-container">
        <mat-slide-toggle color="primary" class="equipment-condition" formControlName="idealCondition">
          {{ filterModalLabels.idealConditionLabel }}
        </mat-slide-toggle>
      </section>
    </form>
  </ng-container>
  <ng-container footer>
    <section class="filter-actions">
      @if (filterForm.dirty) {
        <button type="button" mat-button color="primary" class="filter-reset modal-action-button"
          (click)="resetFilters()">
          <div class="inner"><i class="cross"></i> <span>{{ filterModalLabels.clearFiltersButtonLabel }}</span></div>
        </button>
        <button
          form="filterForm"
          type="submit"
          mat-raised-button
          color="primary"
          class="modal-action-button"
          [mat-dialog-close]="false"
          >
          {{ filterModalLabels.submitButtonLabel }} :
          @if (count !== undefined) {
            {{count}}
          }
          @if (count === undefined) {
            <mat-progress-spinner
              class="example-margin"
              color="accent"
              mode="indeterminate"
              diameter="20"
            ></mat-progress-spinner>
          }
        </button>
      }
      @if (!filterForm.dirty) {
        <button
          type="button"
          mat-raised-button
          color="primary"
          class="modal-action-button"
          [mat-dialog-close]="false"
          (click)="showEquipments()"
          >
          {{ filterModalLabels.applyButtonLabel }}
        </button>
      }
    </section>
  </ng-container>
</lc-modal-layout>
